{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction generateMarkup(images) {\n  return images\n    .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\" loading=\"lazy\" />\n        </a>\n        <ul class=\"image-stats\">\n          <li class=\"stat-item\"><span class=\"stat-label\">Likes:</span> ${likes}</li>\n          <li class=\"stat-item\"><span class=\"stat-label\">Views:</span> ${views}</li>\n          <li class=\"stat-item\"><span class=\"stat-label\">Comments:</span> ${comments}</li>\n          <li class=\"stat-item\"><span class=\"stat-label\">Downloads:</span> ${downloads}</li>\n        </ul>\n      </li>\n    `)\n    .join('');\n}\n\nexport function createGallery(images) {\n  galleryContainer.innerHTML = generateMarkup(images);\n  lightbox.refresh();\n}\n\nexport function appendToGallery(images) {\n  galleryContainer.insertAdjacentHTML('beforeend', generateMarkup(images));\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.style.display = 'inline';\n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n","import axios from 'axios';\n\nconst API_KEY = '51669150-fb97c08ffc3fd3823d92d526e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page = 1, perPage = 15) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n  return response.data;\n}","import { createGallery, appendToGallery, clearGallery, showLoader, hideLoader } from './js/render-functions.js';\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet searchQueryGlobal = '';\nconst perPage = 15;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const searchQuery = event.currentTarget.elements['search-text'].value.trim();\n\n  if (!searchQuery) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  if (searchQuery !== searchQueryGlobal) {\n    currentPage = 1;\n    clearGallery();\n    loadMoreBtn.style.display = 'none';\n    searchQueryGlobal = searchQuery;\n  }\n\n  await fetchImages();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage++;\n  await fetchImages();\n});\n\nasync function fetchImages() {\n  try {\n    showLoader();\n\n    const data = await getImagesByQuery(searchQueryGlobal, currentPage, perPage);\n\n    hideLoader();\n\n    if (!data.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      loadMoreBtn.style.display = 'none';\n      return;\n    }\n\n    if (currentPage === 1) {\n      createGallery(data.hits);\n      iziToast.success({\n        title: 'Success',\n        message: `Found ${data.totalHits} images.`,\n        position: 'topRight',\n      });\n    } else {\n      appendToGallery(data.hits);\n\n      const galleryItems = document.querySelectorAll('.gallery .gallery-item');\n      if (galleryItems.length > 0) {\n        const cardHeight = galleryItems[0].getBoundingClientRect().height;\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n    }\n\n    if (currentPage * perPage >= data.totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n    console.error(error);\n  }\n}\n\nconst input = document.querySelector('input');\ninput.addEventListener('input', () => {\n  if (input.value.trim() !== '') {\n    input.classList.add('filled');\n  } else {\n    input.classList.remove('filled');\n  }\n});\n"],"names":["galleryContainer","loader","lightbox","SimpleLightbox","generateMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","createGallery","appendToGallery","clearGallery","showLoader","hideLoader","API_KEY","BASE_URL","getImagesByQuery","query","page","perPage","axios","form","loadMoreBtn","currentPage","searchQueryGlobal","event","searchQuery","iziToast","fetchImages","data","galleryItems","cardHeight","error","input"],"mappings":"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"}